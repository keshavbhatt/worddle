name: worddle
version: '1.0'
summary: Guess a five-letter word in siz attempts
description: |
  Wordle is a web-based word game developed by Josh Wardle. Players have six attempts to guess a five-letter word; feedback is given for each guess, in the form of colored tiles, indicating when letters match or occupy the correct position. 
grade: stable
confinement: strict
icon: snap/gui/icon.png
base: core20

compression: lzo

architectures:
  - build-on: amd64
    run-on: amd64

apps:
  worddle:
    command: desktop-launch worddle
    environment:
       DISABLE_WAYLAND: 1
    desktop: usr/share/applications/worddle.desktop
    plugs:
        - browser-support
        - desktop
        - desktop-legacy
        - gsettings
        - home
        - opengl
        - audio-playback
        - unity7
        - x11
        - network
        - wayland

plugs:
  gsettings:
  gtk-3-themes:
    interface: content
    target: $SNAP/data-dir/themes
    default-provider: gtk-common-themes
  icon-themes:
    interface: content
    target: $SNAP/data-dir/icons
    default-provider: gtk-common-themes
  sound-themes:
    interface: content
    target: $SNAP/data-dir/sounds
    default-provider: gtk-common-themes

package-repositories:
        - type: apt
          formats: [deb, deb-src]
          components: [main]
          suites: [focal]
          key-id: C65D51784EDC19A871DBDBB710C56D0DE9977759
          url: https://ppa.launchpadcontent.net/beineri/opt-qt-5.15.0-focal/ubuntu


parts:
  application:
     plugin: qmake
     build-packages:
            - build-essential
            - qt515base
            - qt515tools
            - qt515webengine
            - libgl1-mesa-dev
     stage-packages:
            - qt515base
            - qt515webengine
     source: https://github.com/keshavbhatt/worddle.git
     source-subdir: src/
     override-build: |
            export PATH=/opt/qt515/bin:$PATH
            which qmake
            snapcraftctl build
            sed -i 's|Icon=.*|Icon=${SNAP}/meta/gui/icon.png|g' ${SNAPCRAFT_PART_SRC}/worddle.desktop
            cp -rf ${SNAPCRAFT_PART_SRC}/worddle.desktop ${SNAPCRAFT_PART_INSTALL}/usr/share/applications/worddle.desktop
